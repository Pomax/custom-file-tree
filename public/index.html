<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>File-tree demo</title>
    <script
      src="https://pomax.github.io/dragdroptouch/dist/drag-drop-touch.esm.min.js?autoload"
      type="module"
    ></script>
    <link rel="stylesheet" href="../dist/file-tree.css" async />
    <script src="index.js" type="module" async></script>
    <link rel="stylesheet" href="index.css" async />
  </head>

  <body>
    <header>
      <h1>
        This is a
        <a href="https://github.com/pomax/custom-file-tree"
          ><code>&lt;file-tree&gt;</code></a
        >
      </h1>
      <p>
        It shows off a dummy file tree with blanket "do everything" permissions
        (there are no real files backing this tree, it's <em>just</em> the file
        tree interface, generating permission events that we just blanket allow
        in order to show off the interface).
      </p>
    </header>

    <h2>The element:</h2>

    <file-tree show-top-level="true" remove-empty-dir="true"></file-tree>

    <p>
      You can click files, drag files and directories around, create, rename,
      and delete files and directories, and you can upload files or entire
      folders from your device (which, because this file tree isn't backed by
      anything, just means you see your filenames show up in the tree, there is
      no data associated with them on this page).
    </p>

    <h2>The HTML that made the above work:</h2>

    <p>
      It's an HTML element. The code is identical to other HTML elements, in
      that you just write:
    </p>

    <pre><code>&lt;file-tree&gt;&lt;/file-tree&gt;</code></pre>

    <p>Or generate a `file-tree` element on the JS side:</p>

    <pre><code>const tree = document.createElement(`file-tree`);
document.body.appendchild(tree);</code></pre>

    <p>And that's all you need as far as the page code is concerned.</p>

    <p>
      In this case we've also specified the <code>show-top-level</code> and
      <code>remove-empty-dir</code> attributes, so that we get to see all the
      functionality, with the first showing the normally hidden <code>.</code>
      directory that everything lives under, and the latter deleting any
      directory that becomes empty when deleting the last file and directory
      inside of it.
    </p>

    <h2>The JS that made the above work:</h2>

    <p>
      On th JS side, we get a reference to our file tree element, and then pass
      it a list of file paths, as an array of strings. Then, in order to make
      sure that you can see the tree "working", we set up event listeners for
      all permission events the file tree generates, granting them immediately.
    </p>

    <pre><code>// Add &lt;file-tree&gt; to our page and grab the element
import "../dist/file-tree.esm.js";
const fileTree = document.querySelector(`file-tree`);

// Set some files. Intentionally terribly sorted.
const demoList = [
  `dist/README.md`,
  `dist/file-tree.esm.js`,
  `dist/file-tree.esm.min.js`,
  `dist/old/README.old`,
  `dist/old/file-tree.esm.js`,
  `dist/old/file-tree.esm.min.js`,
  `public/index.html`,
  `public/index.js`,
  `public/README.md`,
  `src/dir-entry.js`,
  `src/file-entry.js`,
  `src/file-tree.css`,
  `src/file-tree.js`,
  `src/README.md`,
  `src/utils.js`,
  `test/cake.because.why.not`,
  `test/README.md`,
  `package.json`,
  `README.md`,
];

fileTree.setFiles(demoList);

// Listen for, and grant every, file tree event
const eventList = [
  // The main event your users care about
  `file:click`,
  // File events you care about
  `file:create`,
  `file:rename`,
  `file:move`,
  `file:delete`,
  // Directory events you care about
  `dir:click`,
  `dir:create`,
  `dir:rename`,
  `dir:move`,
  `dir:delete`,
];

eventList.forEach((type) =>
  fileTree.addEventListener(type, ({ detail }) => detail.grant())
);</code></pre>

    <h2>That's, uh, a lot of buttons?</h2>

    <p>
      There is no touch equivalent of "mouse-over", and if you want to frustrate
      your users as much as possible, you put common operations under a
      "hamburger" or ellipse menu button so they <em>always</em> have to click
      or tap something twice. There are a lot of buttons, because your user
      should be in control of what happens.
    </p>

    <h2>See for yourself</h2>

    <p>
      If you "view-source" this page, you'll see there's nothing special going
      on in the HTML, and viewing the <a href="index.js">page JS</a> should show
      the same code as listed above.
    </p>

    <p>
      For more information, head on over to its
      <a href="https://github.com/Pomax/custom-file-tree">project page</a> on
      GitHub, which has more detailed instructions on how to use this element,
      and how to work with th events it generates.
    </p>

    <p>&mdash; <a href="https://mastodon.social/@TheRealPomax">Pomax</a></p>
  </body>
</html>
